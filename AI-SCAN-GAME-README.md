# 🤖 AI 掃描彈跳遊戲系統

## 🎯 功能說明

這是一個結合 **AI 物體識別** + **投影遊戲** 的完整系統:

1. **手機 AI 掃描** → 用相機掃描現實空間中的物體
2. **AI 自動識別** → TensorFlow.js 識別物體作為遊戲障礙物  
3. **傳送到投影端** → 透過 WebSocket 即時傳輸
4. **角色彈跳遊戲** → 玩家在掃描的障礙物上彈跳

---

## 📁 檔案說明

### 三種版本

**1. 單機完整版** (`game-ai-scan-bounce.html`)
- ✅ 手機單獨使用,不需伺服器
- ✅ AI 掃描 + 遊戲都在同一個檔案
- ✅ 適合快速測試
- ❌ 無法投影到大螢幕

**2. 手機掃描器** (`game-scanner-mobile.html`)  
- ✅ 手機端 AI 掃描
- ✅ 傳送障礙物資料到投影端
- ✅ 需搭配投影端使用
- ✅ WebSocket 連線

**3. 投影端顯示** (`game-projector-ai.html`)
- ✅ 接收手機掃描的障礙物
- ✅ 顯示彈跳遊戲
- ✅ 大螢幕顯示
- ✅ 鍵盤控制

---

## 🚀 使用方式

### 方案 A: 單機測試 (最簡單)

**檔案**: `game-ai-scan-bounce.html`

1. 手機開啟檔案
2. 允許相機權限
3. 左右移動手機掃描物體
4. 偵測到 3+ 個物體後點「開始遊戲」
5. 在手機上玩彈跳遊戲

**優點**: 不需伺服器,立即測試  
**缺點**: 只能在手機小螢幕玩

---

### 方案 B: 投影遊戲 (完整版)

**檔案**: 
- 手機: `game-scanner-mobile.html`
- 投影端: `game-projector-ai.html`

**步驟**:

#### 1️⃣ 上傳到 Render
```
上傳這兩個檔案到你的 GitHub repo:
- game-scanner-mobile.html
- game-projector-ai.html
```

#### 2️⃣ 開啟投影端
```
電腦/平板開啟:
https://bounce-7ok4.onrender.com/game-projector-ai.html
```
會顯示「等待 AI 掃描...」

#### 3️⃣ 手機掃描
```
手機開啟:
https://bounce-7ok4.onrender.com/game-scanner-mobile.html
```
- 允許相機權限
- 左右移動手機掃描空間
- 看到綠色框框 = AI 偵測到物體
- 掃描到 3+ 物體後可點「開始遊戲」

#### 4️⃣ 玩遊戲!
- 點擊「開始遊戲」
- 投影端會顯示遊戲畫面
- 使用鍵盤 WASD + 空白鍵控制

---

## 🤖 AI 識別說明

### 使用的 AI 模型
- **TensorFlow.js** + **COCO-SSD**
- 可識別 80 種常見物體
- 在瀏覽器中運行,首次載入約 5MB

### 可識別的物體範圍
```
常見物體:
- 人物 (person)
- 傢俱 (chair, table, couch, bed)
- 電子產品 (laptop, mouse, keyboard, cell phone)
- 廚房用品 (cup, bottle, bowl, fork, knife)
- 交通工具 (car, bicycle, motorcycle)
- 動物 (cat, dog, bird)
- 食物 (apple, banana, pizza, cake)
...等共 80 種
```

### 掃描技巧
1. **左右移動**: 慢慢左右移動手機
2. **保持距離**: 距離物體 1-3 公尺
3. **充足光線**: 避免太暗的環境
4. **清晰物體**: 物體輪廓清楚較易識別
5. **多次掃描**: 重複掃描可提高準確度

---

## 🎮 遊戲玩法

### 目標
- 在掃描到的障礙物上彈跳
- 收集分數
- 不要掉出畫面

### 控制方式

**鍵盤** (投影端):
```
W / ↑ / 空白鍵  →  跳躍
A / ←          →  左移
D / →          →  右移
S / ↓          →  (無作用)
```

**觸控** (手機單機版):
```
點擊螢幕     →  跳躍
左右滑動     →  左右移動
```

### 遊戲規則
- ✅ 站在平台上會持續加分
- ❌ 掉出畫面扣 10 分
- 🔄 掉落後會重生在起點

---

## 📊 技術細節

### AI 掃描流程
```
1. 開啟相機 (後置鏡頭)
2. 載入 TensorFlow.js COCO-SSD 模型
3. 每幀執行物體偵測
4. 過濾信心度 > 50% 的結果
5. 記錄物體位置和類別
6. 繪製綠色邊界框 + 標籤
7. 計算掃描覆蓋範圍
8. 達到條件後可開始遊戲
```

### 障礙物轉換
```
相機座標 → 正規化 (0-1) → 傳輸 → 投影端座標

例如:
手機偵測: x=100, y=200 (1080x1920 畫面)
正規化:   x=0.092, y=0.104
投影端:   x=177, y=200 (1920x1080 畫面)
```

### WebSocket 訊息格式
```javascript
// 遊戲資料
{
  type: 'gameData',
  platforms: [
    {
      x: 0.5,      // 正規化 X 座標
      y: 0.6,      // 正規化 Y 座標  
      width: 0.2,  // 正規化寬度
      height: 0.02,
      label: 'chair'
    },
    ...
  ],
  screenSize: { width: 1080, height: 1920 }
}

// 開始遊戲
{
  type: 'startGame',
  timestamp: 1234567890
}
```

---

## 🎨 視覺設計

### 手機掃描介面
- **相機背景** - 全螢幕即時預覽
- **掃描線** - 綠色光線上下移動
- **邊界框** - 偵測到的物體綠框
- **統計面板** - 顯示物體數量和進度

### 投影端遊戲
- **深色背景** - #1a1a2e 星空感
- **網格線** - 淡色背景網格
- **綠色平台** - 掃描到的障礙物
- **紅色角色** - 可愛方塊人物
- **發光效果** - 物體陰影和光暈

---

## ⚡ 性能優化

### AI 模型
- 首次載入: 5MB (CDN快取)
- 後續使用: 無需重新下載
- 偵測速度: 約 15-30 FPS

### 網路傳輸
- 使用正規化座標 (減少資料量)
- 過濾重複物體 (避免冗餘)
- WebSocket 即時傳輸 (低延遲)

### 遊戲渲染
- Canvas 2D (高效能)
- requestAnimationFrame (流暢 60 FPS)
- 簡單碰撞檢測 (AABB)

---

## 🐛 常見問題

**Q: AI 無法識別物體?**
- 改善光線條件
- 靠近物體一些
- 選擇輪廓清晰的物體
- 嘗試常見物體(椅子、杯子等)

**Q: 掃描太慢?**
- 正常現象,AI 需要計算時間
- 首次載入模型需等待
- 行動裝置效能影響速度

**Q: 投影端收不到資料?**
- 確認 WebSocket 連線成功(綠點)
- 檢查兩端都連到同一伺服器
- 重新整理頁面重試

**Q: 遊戲太難/太簡單?**
- 可調整程式碼中的參數:
  - GRAVITY: 重力強度
  - JUMP_FORCE: 跳躍力度
  - MOVE_SPEED: 移動速度

---

## 🎯 進階玩法

### 創意關卡設計
- 用不同物體創造不同難度
- 大物體 = 大平台(簡單)
- 小物體 = 小平台(困難)
- 高低錯落的物體 = 有趣關卡

### 多人對戰
- 修改程式加入多個玩家
- 看誰先到達終點
- 分數競賽模式

### 主題遊戲
- 廚房主題: 只掃描廚具
- 辦公室主題: 只掃描電子產品
- 寵物主題: 加入動物角色

---

## 📝 下一步開發

### 建議功能
- [ ] 增加遊戲角色選擇
- [ ] 加入音效和背景音樂
- [ ] 多人連線對戰
- [ ] 關卡編輯器
- [ ] 成就系統
- [ ] 排行榜

### 技術升級
- [ ] 使用更精確的 AI 模型
- [ ] 3D 物體識別
- [ ] AR 擴增實境整合
- [ ] 深度感測器支援

---

## 🌐 部署網址

**測試網址** (上傳後):
```
單機版:
https://bounce-7ok4.onrender.com/game-ai-scan-bounce.html

手機掃描器:
https://bounce-7ok4.onrender.com/game-scanner-mobile.html

投影端:
https://bounce-7ok4.onrender.com/game-projector-ai.html
```

---

## 📄 檔案清單總結

**必須上傳** (投影遊戲版):
- ✅ game-scanner-mobile.html
- ✅ game-projector-ai.html
- ✅ start-server-ws.py (已有)
- ✅ requirements.txt (已有)

**選用上傳** (單機測試):
- ✅ game-ai-scan-bounce.html

---

**🎮 開始享受 AI 掃描彈跳遊戲吧!**

製作: bbbb @ 早美人設計  
日期: 2026-01-12  
版本: AI Scan v1.0
